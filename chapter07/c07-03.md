> c07-03.md
---

## 📄 03 정규화
1. 정규화 개념
- 이상현상의 원인은 여러 가지가 있는데, 대부분 두 가지 이상의 정보가 한 릴레이션에 저장되어 있으므로 발생한다. 따라 이상현상은 릴레이션을 분해하여 제거한다. 분해된 릴레이션에 이상현상이 남아 있다면 이상현상이 없어질 때까지 분해한다. 이상현상이 발생하는 릴레이션을 분해하여 이상현상을 없애는 과정을 정규화(normalization)라고 한다.

2. 정규화 과정
- 제1 정규형
    - 제1정규형은 릴레이션의 속성값이 원자겂이어야 한다는 조건으로 정의는 다음과 같다
    - 제1정규형
        - 릴레이션 R의 모든 속성값이 원자값을 가지면 제1정규형이라고 한다.
    - 제1정규형으로 변환
        - 관계 데이터베이스에서 릴레이션의 속성값은 반드시 원자값이어야 한다. 고객취미들(이름, 취미들) 릴레이션을 보자. 추신수 선수의 취미가 (영화, 음악)으로 원자값이 아니다. 속성값이 원자값이 아닐 경우 원자값을 갖도록 변환해 주어야 한다. 고객취미들(이름, 취미들) 릴레이션을 고객취미(이름, 취미)릴레이션으로 바꾸어 저장하면 제1정규형을 만족한다.
        고객취미들(이름, 취미들)->고객취미(이름,취미)

고객취미들
이름 | 취미들
--- | ---
추신수 | 영화, 음악

고객취미
이름 | 취미
--- | ---
추신수 | 영화
추신수 | 음악

- 제 2정규형
    - 제 2정규형은 릴레이션의 기본키가 복합키 일 때, 복합키의 일부분이 다른 속성의 결정자인지 아닌지를 판단하는 것이다.
    - 릴레이션 R이 제1정규형이고 기본키가 아닌 속성이 기본키에 완전 함수 종속일 때 제2정규형이라고 한다.
    - 제 2정규형을 이해하기 위해서는 완전 함수 종속의 개념을 이해해야 한다.
    - 완전 함수 종속: A와 B가 릴레이션 R의 속성이고 A->B종속성이 성립할 때, B가 A의 속성 전체에 함수 종속하고 부분집합 속성에 함수 종속하지 않을 경우 완전 함수 종속이라고 한다.
    - 수강강좌( 학생번호, 강좌이름, 강의실, 성적) 릴레이션
    - 수강 강좌 릴레이션의 기본키는 (학생번호, 강좌이름)이고, 기본키가 아닌 속성은 성적, 강의실이다. 성적과 강의실은 모두 기본키에 함수적으로 종속되어 있지만, 강의실은 기본키의 일부인 강좌이름에 한 번 더 종속되어 있다. 즉 기본키(학생번호, 강좌이름)의 부분집합인 강좌이름에 종속된다. 이처럼 기본키가 아닌 속성이 기본키에 완전 함수 종속이 아닌 불완전 함수 종속되어 있으면 이상현상이 발생한다.

- 제3 정규형
    - 제3 정규형은 속성들이 이행적으로 종속되어 있는지를 판단하는 것이다.
    - 제3 정규형
        - 릴레이션R이 제2정규형이고 기본키가 아닌 속성이 기본키에 비이행적으로 종속할 때 제3정규형이라고 한다. 이행적 종속이란 A->B, B->C가 성립할 때 A->C가 성립되는 함수 종속성을 말한다.
        - 계절학기(학생번호, 강좌이름, 수강료)릴레이션을 보자. 계절학기 릴레이션은 수강 정보와 수강료 정보를 저장한다. 단, 계절학기이기 때문에 학생은 한 강좌만 신청할 수 있다고 가정한다.
        - 계절학기 릴레이션의 기본키는 학생번호이고, 기본키가 아닌 속성은 강좌이름, 수강료이다. 강좌이름, 수강료는 모두 기본키에 함수적으로 종속되어 있다. 그런데 수강료는 기본키가 아닌 강좌이름에 한 번 더 종속되어 있다. 결국 (학생번호->강좌이름),(강좌이름->수강료)로 수강료는 기본키에 이행적으로 종속되어 있다.
- BCNF
    - 릴레이션에 존재하는 함수 종속성에서 모든 결정가 후보키이면 BCNF 정규형이다.
    - 특강수강(학생번호, 특강이름, 교수) 릴레이션을 보자. 한 학생은 한 개 이상의 특강을 신청할 수 있고, 교수는 하나의 특강만 담당한다고 가정한다.
    - 이상현상의 원인은 특강수강 릴레이션의 함수 종속성 다이어그램을 보면 알 있다. 특강 수강 릴레이션의 기본키는 (학생번호, 특강이름)이며 (학생번호, 특강이름) ->교수, 교수->특강이름 관계가 성립한다. 여기서 교수는 한 개의 특강만 개설하기 때문에 교수->특강이름 관계가 성립하는 것이다. 특강수강 릴레이션의 결정자 중 (학생번호, 특강이름)은 후보키이지만 교수는 후보키가 아니다. 이처럼 결정지이면서 후보키가 아닌 속성이 존재하면 이상현상이 발생한다.
    - BCNF 정규형으로 변환
        - 특강수강(학생번호, 특강이름, 교수)
        - 분해해서
        - 특강신청(학생번호, 교수), 특강교수(특강이름, 교수)
4. 정규화 정리
- 제1정규형->제2정규형->제3정규형->BCNF->제4정규형->제5정규형
- 대부분의 릴레이션은 BCNF까지 정규화면 실제적인 이상현상은 없어진다.
